<launch>
    <arg name="chassis_type" default="swerve"/>
    <arg name="use_odom_tf" default="false"/>
    <arg name="use_laserscan_convert" default="true"/>
    <arg name="use_ransac" default="true"/>
    <arg name="occupancy_grid_resolution" default="0.05"/>
    <arg name="merged_lidar_publish_frequency" default="40.0"/>
    <arg name="publish_map" default="true"/>
    <arg name="initial_allow_auto_drive" default="false"/>

    <arg name="chassis_param_path" default=""/>
    <arg name="line_segments_path" default=""/>
    <arg name="circles_path" default=""/>
    <arg name="footprint_param_path" default=""/>
    <arg name="lidar_param_path" default=""/>
    <arg name="localization_param_path" default=""/>
    <arg name="planning_param_path" default=""/>
    <arg name="control_param_path" default=""/>
    <arg name="controller_param_path" default=""/>
    <arg name="simulation_param_path" default=""/>
    <arg name="state_graph_path" default=""/>
    <arg name="rviz_path" default="$(find-pkg-share natto_launch)/rviz/sample.rviz"/>

    <arg name="launch_common" default="true"/>
    <arg name="launch_simulation" default="true"/>
    <arg name="launch_sensing" default="true"/>
    <arg name="launch_localization" default="true"/>
    <arg name="launch_control" default="true"/>
    <arg name="launch_visualization" default="true"/>

    <!-- コモン -->
    <include file="$(find-pkg-share natto_launch)/launch/components/common.launch.xml" if="$(var launch_common)">
        <arg name="line_segments_path" value="$(var line_segments_path)"/>
        <arg name="circles_path" value="$(var circles_path)"/>
        <arg name="occupancy_grid_resolution" value="$(var occupancy_grid_resolution)"/>
        <arg name="footprint_param_path" value="$(var footprint_param_path)"/>
        <arg name="publish_map" value="$(var publish_map)"/>
    </include>

    <!-- シミュレーション -->
    <include file="$(find-pkg-share natto_launch)/launch/components/simulation.launch.xml" if="$(var launch_simulation)">
        <arg name="chassis_type" value="$(var chassis_type)"/>
        <arg name="chassis_param_path" value="$(var chassis_param_path)"/>
        <arg name="lidar_param_path" value="$(var lidar_param_path)"/>
        <arg name="simulation_param_path" value="$(var simulation_param_path)"/>
    </include>

    <!-- センシング -->
    <include file="$(find-pkg-share natto_launch)/launch/components/sensing.launch.xml" if="$(var launch_sensing)">
        <arg name="use_laserscan_convert" value="$(var use_laserscan_convert)"/>
        <arg name="use_ransac" value="true"/>
        <arg name="merged_lidar_publish_frequency" value="$(var merged_lidar_publish_frequency)"/>
        <arg name="lidar_param_path" value="$(var lidar_param_path)"/>
    </include>

    <!-- 自己位置 -->
    <include file="$(find-pkg-share natto_launch)/launch/components/localization.launch.xml" if="$(var launch_localization)">
        <arg name="localization_param_path" value="$(var localization_param_path)"/>
        <arg name="chassis_type" value="$(var chassis_type)"/>
        <arg name="chassis_param_path" value="$(var chassis_param_path)"/>
        <arg name="use_odom_tf" value="$(var use_odom_tf)"/>
    </include>

    <!-- コントロール -->
    <include file="$(find-pkg-share natto_launch)/launch/components/control.launch.xml" if="$(var launch_control)">
        <arg name="chassis_type" value="$(var chassis_type)"/>
        <arg name="chassis_param_path" value="$(var chassis_param_path)"/>
        <arg name="control_param_path" value="$(var control_param_path)"/>
        <arg name="controller_param_path" value="$(var controller_param_path)"/>
        <arg name="planning_param_path" value="$(var planning_param_path)"/>
    </include>

    <!-- 行動管理 -->
    <include file="$(find-pkg-share natto_launch)/launch/components/behavior.launch.xml">
        <arg name="state_graph_path" value="$(var state_graph_path)"/>
    </include>

    <!-- 表示 -->
    <include file="$(find-pkg-share natto_launch)/launch/components/visualization.launch.xml" if="$(var launch_visualization)">
        <arg name="chassis_type" value="$(var chassis_type)"/>
        <arg name="chassis_param_path" value="$(var chassis_param_path)"/>
        <arg name="rviz_path" value="$(var rviz_path)"/>
    </include>
</launch>