<launch>
    <arg name="chassis_type" default="swerve"/>
    <arg name="simulation_param_path" default=""/>
    <arg name="chassis_param_path" default=""/>
    <arg name="lidar_param_path" default=""/>

    <!-- シミュレーションコンテナー -->
    <node_container pkg="rclcpp_components" exec="component_container" name="simulation_container" namespace="/simulation">
        <composable_node pkg="natto_simple_simulation" plugin="joint_state_simulator::joint_state_simulator" name="joint_state_simulator" namespace="/simulation">
            <param from="$(var simulation_param_path)"/>
            <remap from="joint_states" to="/joint_states"/>
            <remap from="command_joint_states" to="/$(var chassis_type)/command_joint_states"/>
        </composable_node>
    </node_container>

    <!-- LiDARシミュレーター -->
    <include file="$(find-pkg-share natto_launch)/launch/components/lidar_simulation.launch.py">
        <arg name="lidar_param_path" value="$(var lidar_param_path)"/>
    </include>
</launch>